{% extends 'base.html' %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'shared/components.css' %}">
{% endblock %}

{% block content %}
<div class="page-container">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2 class="text-primary fw-bold"><i class="fas fa-bell me-2"></i>My Notifications</h2>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            {% if notifications %}
                {% for notification in notifications %}
                    <div class="glass-card notification-card {% if not notification.read %}unread{% endif %}">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="notification-title">{{ notification.title }}</h5>
                                    <p class="card-text mb-2">{{ notification.message }}</p>
                                    <small class="notification-time"><i class="far fa-clock me-1"></i>{{ notification.created_at|timesince }} ago</small>
                                </div>
                                {% if not notification.read %}
                                    <form method="post" action="{% url 'mark_notification_read' notification.id %}" class="d-inline">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-mark-read btn-outline-primary">
                                            <i class="fas fa-check me-1"></i>Mark as Read
                                        </button>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>You have no notifications.
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}